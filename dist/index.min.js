import escapeHtml from"escape-html";const escapeArg=e=>Array.isArray(e)?[].concat(...e.map(escapeArg)):e instanceof Element||e instanceof Text?e:null!=e&&e.toString?escapeHtml(e.toString()):null,htmlFairy=(e,...t)=>{const r=t.map(escapeArg);t=r.map((e,t)=>e instanceof Element||e instanceof Text?`<div class="html-fairy-ph" data-index="${t}"></div>`:Array.isArray(e)?e.every(e=>e instanceof Element||e instanceof Text)?`<div class="html-fairy-ph" data-index="${t}" data-placeholder-type="array"></div>`:e.map(e=>e??"").join(""):e??""),e=String.raw(e,...t),t=document.createElement("div"),t.innerHTML=e.trim(),t.querySelectorAll(".html-fairy-ph").forEach(e=>{var t=Number.parseInt(e.getAttribute("data-index")??"-1",10);if(-1===t)throw new Error("html-fairy placeholder is defined with no data index");if("array"===e.getAttribute("data-placeholder-type")){const a=e.parentElement;e.remove(),r[t].forEach(e=>{a?.appendChild(e)})}else e.parentElement?.replaceChild(r[t],e)}),e=Array.from(t.childNodes).filter(e=>"#text"!==e.nodeName||e.textContent&&0<e.textContent.trim().length);return t.firstChild&&1<e.length?e:t.firstChild};export default htmlFairy;